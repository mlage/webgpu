{"version":3,"file":"main.bundle.js","mappings":"yBAGA,MAAMA,EAAgB,CAAMC,EAAc,mBAAkB,O,OAAA,E,OAAA,E,EAAA,Y,MACxD,MAAMC,ECHHC,UAAUC,IAAW,mBACjB,uBDIP,GAAc,yBAAXF,EAEC,MADAG,QAAQC,IAAIJ,GACP,0CAGT,MAAMK,EAASC,SAASC,cAAc,kBAEhCC,EAAmBC,OAAOD,kBAAoB,EACpDH,EAAOK,MAAQ,KAAOF,EACtBH,EAAOM,OAAS,IAAMH,EAEtB,MAAMI,QAA6B,QAAb,EAAAX,UAAUC,WAAG,eAAEW,iBAC/BC,QAAeF,aAAO,EAAPA,EAASG,gBACxBC,EAAUX,EAAOY,WAAW,UAE5BC,EAAgB,aAOtB,IAAIC,EANJH,EAAQI,UAAU,CACdN,SACAO,OAAOH,EACPI,UAAU,kBAIK,mBAAhBvB,IAAkCoB,EAAY,UAIjD,MAAMI,EEhCO,iuCFgCPA,EEMS,kJFLTC,EAAWV,EAAOW,qBAAqB,CACzCC,OAAO,CACHC,OAAOb,EAAOc,mBAAmB,CAC7BC,KAAKN,IAETO,WAAW,QAEfC,SAAS,CACLJ,OAAOb,EAAOc,mBAAmB,CAC7BC,KAAKN,IAETO,WAAW,OACXE,QAAQ,CAAC,CACLX,OAAOH,KAGfe,UAAU,CACNC,SAASnC,EACToC,iBAAkBhB,GAEtBiB,OAAO,SAGLC,EAAevB,EAAOwB,uBACtBC,EAAYvB,EAAQwB,oBAAoBC,aAExCC,EAAWL,EAAeM,gBAAgB,CAC5CC,iBAAiB,CAAC,CACdC,WAAW,CAAC,EAAK,EAAK,EAAK,GAC3BC,QAAQ,QACRC,OAAO,QACPC,KAAMT,MAGdG,EAAWO,YAAYzB,GACvBkB,EAAWQ,KAAK,GAChBR,EAAWS,MAEXrC,EAAOsC,MAAMC,OAAO,CAAChB,EAAeiB,UACxC,E,YAtE4D,K,6QAsE3D,EAEoC,QAArC,EAAAhD,SAASC,cAAc,sBAAc,SAAEgD,iBAAiB,UAAWC,IAC/D,MAAMC,EAAOD,EAAEE,OACTC,EAAKF,EAAOG,QAAQH,EAAOI,eAAeC,MAEhDhE,EAAgB6D,EAAK,IAGzB7D,G","sources":["webpack://webgpu/./src/main.ts","webpack://webgpu/./src/helper.ts","webpack://webgpu/./src/shader.ts"],"sourcesContent":["import { checkWebGPU } from \"./helper\";\r\nimport { Shaders } from \"./shader\";\r\n\r\nconst createPrimitive=async(typePrimitive=\"triangle-list\")=>{\r\n    const checkGpu=checkWebGPU();\r\n\r\n    if(checkGpu===\"webGPU não suportado\"){\r\n        console.log(checkGpu);\r\n        throw(\"Seu navegador atual não suporta webGPU!\");\r\n    }\r\n\r\n    const canvas = document.querySelector(\"#canvas-webgpu\") as HTMLCanvasElement;\r\n\r\n    const devicePixelRatio = window.devicePixelRatio || 1;\r\n    canvas.width = 1024 * devicePixelRatio;\r\n    canvas.height = 768 * devicePixelRatio;\r\n\r\n    const adapter = await navigator.gpu?.requestAdapter() as GPUAdapter;\r\n    const device = await adapter?.requestDevice() as GPUDevice;\r\n    const context = canvas.getContext(\"webgpu\") as unknown as GPUCanvasContext;\r\n\r\n    const swapChainFormat='bgra8unorm';\r\n    context.configure({\r\n        device,\r\n        format:swapChainFormat,\r\n        alphaMode:\"premultiplied\"\r\n    })\r\n\r\n    let indexFormat=undefined;\r\n    if(typePrimitive===\"triangle-strip\") indexFormat=\"uint32\";\r\n\r\n\r\n\r\n    const shaders=Shaders();\r\n    const pipeline = device.createRenderPipeline({\r\n        vertex:{\r\n            module:device.createShaderModule({\r\n                code:shaders.vertex\r\n            }),\r\n            entryPoint:\"main\",\r\n        },\r\n        fragment:{\r\n            module:device.createShaderModule({\r\n                code:shaders.fragment\r\n            }),\r\n            entryPoint:\"main\",\r\n            targets:[{\r\n                format:swapChainFormat as GPUTextureFormat\r\n            }]\r\n        },\r\n        primitive:{\r\n            topology:typePrimitive as GPUPrimitiveTopology,\r\n            stripIndexFormat: indexFormat as GPUIndexFormat\r\n        },\r\n        layout:'auto'\r\n    })\r\n\r\n    const commandEncoder=device.createCommandEncoder();\r\n    const textureView=context.getCurrentTexture().createView();\r\n\r\n    const renderPass=commandEncoder.beginRenderPass({\r\n        colorAttachments:[{\r\n            clearValue:[0.0, 0.0, 0.0, 1.0],\r\n            storeOp:\"store\",\r\n            loadOp:\"clear\",\r\n            view: textureView\r\n        }]\r\n    });\r\n    renderPass.setPipeline(pipeline);\r\n    renderPass.draw(9);\r\n    renderPass.end();\r\n\r\n    device.queue.submit([commandEncoder.finish()]);\r\n}\r\n\r\ndocument.querySelector(\"#primitives\")?.addEventListener(\"change\", (e)=>{\r\n    const select=e.target as HTMLSelectElement;\r\n    const type=select.options[select.selectedIndex].value;\r\n\r\n    createPrimitive(type);\r\n});\r\n\r\ncreatePrimitive();\r\n","export const checkWebGPU=()=>{\r\n    if(navigator.gpu)return \"webGPU suportado\"\r\n    return \"webGPU não suportado\"\r\n}","export const Shaders=()=>{\r\n    const vertex=`\r\n        const pos: array<vec2<f32>, 9>=  array<vec2<f32>, 9>(\r\n            vec2<f32>(0.0, 0.7),\r\n            vec2<f32>(-0.3, 0.2),\r\n            vec2<f32>(0.3, 0.2),\r\n            vec2<f32>(-0.3, 0.0),\r\n            vec2<f32>(0.3, 0.0),\r\n            vec2<f32>(-0.3, -0.4),\r\n            vec2<f32>(0.4, -0.2),\r\n            vec2<f32>(0.0, -0.7),\r\n            vec2<f32>(0.4, -0.7),\r\n        );\r\n\r\n        const color: array<vec3<f32>, 9>=  array<vec3<f32>, 9>(\r\n            vec3<f32>(1.0, 0.0, 0.0),\r\n            vec3<f32>(0.0, 1.0, 0.0),\r\n            vec3<f32>(0.0, 0.0, 1.0),\r\n            vec3<f32>(1.0, 0.0, 0.0),\r\n            vec3<f32>(0.0, 1.0, 0.0),\r\n            vec3<f32>(0.0, 0.0, 1.0),\r\n            vec3<f32>(1.0, 0.0, 0.0),\r\n            vec3<f32>(0.0, 1.0, 0.0),\r\n            vec3<f32>(0.0, 0.0, 1.0)\r\n        );\r\n        \r\n        struct Output{\r\n            @builtin(position) Position: vec4<f32>,\r\n            @location(0) vColor: vec4<f32>,\r\n        }\r\n\r\n        @vertex\r\n        fn main(@builtin(vertex_index) VertexIndex: u32) -> Output {\r\n            var out: Output;\r\n            out.Position=vec4<f32>(pos[VertexIndex], 0.0, 1.0);\r\n            out.vColor=vec4<f32>(color[VertexIndex], 1.0);\r\n            return out;\r\n        }\r\n    `\r\n    const fragment=`  \r\n        @fragment\r\n        fn main(@location(0) vColor: vec4<f32>) -> @location(0) vec4<f32> {\r\n            return vColor;\r\n        }\r\n    `\r\n\r\n\r\n    return {vertex, fragment};\r\n}"],"names":["createPrimitive","typePrimitive","checkGpu","navigator","gpu","console","log","canvas","document","querySelector","devicePixelRatio","window","width","height","adapter","requestAdapter","device","requestDevice","context","getContext","swapChainFormat","indexFormat","configure","format","alphaMode","shaders","pipeline","createRenderPipeline","vertex","module","createShaderModule","code","entryPoint","fragment","targets","primitive","topology","stripIndexFormat","layout","commandEncoder","createCommandEncoder","textureView","getCurrentTexture","createView","renderPass","beginRenderPass","colorAttachments","clearValue","storeOp","loadOp","view","setPipeline","draw","end","queue","submit","finish","addEventListener","e","select","target","type","options","selectedIndex","value"],"sourceRoot":""}